<!doctype html>
<html>
	<head>
		<meta content="text/html; charset=UTF-8" http-equiv="content-type">
		<title>extension «iWebEchoppe miscellanea» pour Opencart: fonction "symlink" en PHP et son équivalent en commande Linux</title>
		<meta name="description" content="module «Base des tests» de l'extension «iWebEchoppe miscellanea»">
		<meta name="viewport" content=" width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1 "/>
		<meta http-equiv="Content-Language" content="fr" />
		<!-- NO 'BOTS \ bon, c'est tjrs en création -->
		<META NAME="robots" CONTENT="noindex,nofollow">
		<meta name="googlebot" content="DIRECTIVE">
		<!-- Styles spé-base documentaire -->
		<link rel="stylesheet" type="text/css" href="./../../a-inc-cmn-all-sites/a-css/style-bdd-documents.css">
		<!-- CrazyStat ? -->
		<script type="text/javascript" src="./../../a-inc-cmn-all-sites/a-js/graphic-res-combined-and-shared-by-all-the-net/GoogleUtils.js" defer></script><!-- ← defer == ce script se charge “en arrière-plan”, puis s’exécute lorsque le DOM est entièrement construit. -->
	</head>

<!-- Begin Google traduction -->
<header>
<div id="google_translate_element"></div>
<!-- nb: GoogleUtils.googleTranslateElementInit ci-dessous est du JavaScript -->
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=GoogleUtils.googleTranslateElementInit"></script>
</header>
<!-- End Google traduction -->
<style>
</style>
	<body>
	<header></header>

<br><br><br>
<h1>Assistance lorsque la fonction <code>symlink</code> n’est pas exécutée par l’interpréteur <span class="acronyme">PHP</span>:</h1>



<br><br><br>
<h3>Introduction:</h3>
<br>
<p>Plusieurs raisons peuvent expliquer ce comportement. Voici les étapes à suivre pour diagnostiquer et résoudre le problème:</p>



<br><br><br>
<h3>1. Vérifier si la fonction est désactivée dans <code>php.ini</code></h3>
<ul>
	<li>Ouvrez le fichier de configuration <code>php.ini</code> (généralement situé dans <code>/etc/php/[version]/</code> ou <code>/usr/local/etc/php/</code>).</li>
	<li>Recherchez la directive <code>disable_functions</code> et vérifiez si <code>symlink</code> y est listée.</li>
	<li>Si c’est le cas, retirez-la de la liste ou commentez la ligne avec un <code>;</code>.</li>
</ul>
<p><strong>Exemple:</strong></p>
<pre><code>; disable_functions = symlink, exec, ...</code></pre>
<p>Redémarrez le serveur web (Apache/Nginx) pour appliquer les modifications:</p>
<pre><code>sudo systemctl restart apache2   # ou nginx, php-fpm selon votre configuration</code></pre>



<br><br><br>
<h3>2. Exécuter la fonction via <span class="acronyme">SSH</span></h3>
<p>Si vous ne pouvez pas modifier <code>php.ini</code> (hébergement mutualisé, restrictions), utilisez un accès <strong>SSH</strong> pour exécuter la fonction directement depuis la ligne de commande.</p>

<h3>Avec un client SSH (ex: <span class="acronyme">PuTTY</span>)</h3>
<ul>
	<li>Téléchargez et installez <b>PuTTY</b> (sous Windows) ou utilisez le terminal natif (sous Linux\macOS).</li>
	<li>Connectez-vous avec vos identifiants SSH fournis par votre hébergeur *[1].</li>
	<li>Exécutez la commande PHP directement:</li>
</ul>
<pre><code>php -r "symlink('/chemin/source', '/chemin/destination');"</code></pre>

<h3>Via la console web de votre hébergeur</h3>
<ul>
	<li>Accédez à la console "Shell" ou "Terminal" proposée par votre hébergeur (ex: cPanel > "Terminal", Plesk > "Console SSH").</li>
	<li>Utilisez la même commande que ci-dessus.</li>
</ul>



<br><br><br>
<h3>3. Vérifier les permissions</h3>
<p>Assurez-vous que l’utilisateur PHP (ex: <code>www-data</code>, <code>apache</code>) ou votre compte SSH a les droits nécessaires pour créer des liens symboliques:</p>
<pre><code>ls -ld /chemin/parent/  # Vérifiez les permissions du dossier parent
chmod u+w /chemin/parent/  # Ajoutez les droits d'écriture si nécessaire</code></pre>



<br><br><br>
<h3>4. Détail de la commande Linux pour créer des raccourcis\symlink</h3>
<fieldset>
	● <a name="ln"></a><code>ln &lt;destination&gt; &lt;link_name&gt;</code>

	Cette commande sert à créé un lien (<i>un fichier Link</i>) d'un endroit vers un dossier ou un fichier <code>destination</code> placé ailleurs. 
	Cela permet d'économiser l'espace du disque en économisant les copiés-collés des dossiers ou fichiers.<br>
	<br>
	<u>Pour créer un raccourci:</u><br>
	- <span class="stabilo_lime">avant toute chose, se mettre dans le dossier dans lequel on souhaite créer le lien-raccourci (!!!)</span>, puis il faut lancer:<br>
	<br>
	<pre>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↙--------------------------------------------↖
	<pre><code><span class="stabilo_gris">ln -sf </span><span class="stabilo_orange">/nom_du_fichier_ou_chemin_du_dossier_qui_est_cible_reelle_à_créer</span> <span class="stabilo_jaune">*petit*_nom_du_fichier_raccourci_source_dans_ce_dossier_courant_menant_vers_sa_cible</span></code></pre><br>
	</pre>
	- le paramètre <code>-s</code>: il demande à créé un lien "symbolique" ("soft"). nb: il existe aussi de liens "hard", hors-sujet ici.<br>
	- le paramètre <code>-f</code>: il indique de créer forçant la création, c'est-à-dire de re-créer ledit lien et ce, même s'il existe déjà (utile pour mettre à jour un lien existant sans erreur, de façon inquète).<br>
	- le paramètre <code>-sf</code>: il demande à créer en utilisant la combinaison des deux paramètres unaires précédents.<br>
	
	<br><pre class="LC">$ echo coucou &gt; fichier1
	$ ls -l
	total 4
	-rw-r--r--    1 nicolas  users           7 Dec  6 14:24 fichier1
	$ ln fichier1 fichier2
	$ ln -s fichier1 fichier3
	$ ls -l
	total 8
	-rw-r--r--    2 nicolas  users           7 Dec  6 14:24 fichier1
	-rw-r--r--    2 nicolas  users           7 Dec  6 14:24 fichier2
	lrwxrwxrwx    1 nicolas  users           8 Dec  6 14:25 <span style="color: dodgerblue;">fichier3</span> -&gt; fichier1
	$ rm fichier1 
	$ ls -l
	total 4
	-rw-r--r--    1 nicolas  users           7 Dec  6 14:24 fichier2
	lrwxrwxrwx    1 nicolas  users           8 Dec  6 14:25 <span style="color: rgb(255, 0, 0);">fichier3</span> -&gt; fichier1
	$ cat fichier2 
	coucou
	$ cat fichier3 
	cat: fichier3: No such file or directory</pre>

<br><br><br>

	<fieldset><legend>Curieux? Quel est la différence entre un lien "soft" et un lien "hard"?</legend>
		
		<p align="center" >
			<img border=1 width=285 height=275 src="./symlink_cmdFiles/differenceSymlinkHardVsSoft.jpg" >
		</p>
		
		<br>
		<span class="stabilo_bleu"><u>Pré-requis:</u> ★★★ un fichier sous *nix et Linux est une composition de 2 composantes: son [libellé_nom + son "inode de baptême"].</span><br>
		
		
		&nbsp;&nbsp;&nbsp;&nbsp;• le "soft link" est la même chose qu'un raccourci MS-Windows c'est-à-dire un fichier menant directement vers un fichier ou un répertoire. 
		Si on supprime le fichier pointé par un soft link, le "soft link est cassé ("If the real copy is deleted, the link will not work: simple!").<br>
		&nbsp;&nbsp;&nbsp;&nbsp;• le "hard link" se fait aussi avec la commande...:<br><pre class="LC">$ ln </pre>..., mais sans commutateur ("Hard links" are for *files* only!"). 
		<span class="stabilo_rouge">Ces liens durs (lien "hard") qui se basent sur l'inode, sont hors-sujet ici.</span><br>
	</fieldset>

</fieldset>




<div class="note">
	<strong>Remarque :</strong>
	<ul>
		<li>Les hébergeurs mutualisés désactivent souvent <code>symlink</code> pour des raisons de sécurité.</li>
		<li>Privilégiez les solutions SSH pour contourner les restrictions PHP.</li>
	</ul>
</div>

<div class="contact">
	<h2>Besoin d’aide supplémentaire ?</h2>
	<p>Si les étapes ci-dessus ne fonctionnent pas, contactez le support technique de votre hébergeur pour:</p>
	<ul>
		<li>Demander la levée de la restriction sur <code>symlink</code>.</li>
		<li>Obtenir un accès SSH si ce n’est pas déjà fait.</li>
	</ul>
	<p>Précisez votre environnement (hébergeur, version de PHP, système d’exploitation) pour un accompagnement plus ciblé.</p>
</div>



<br><br><br>
		<label id="REFERENCES" style="font-size: small;">
			*[1]: IK=InfoManiak; OVH="On Vous Héberge", cgiwebhost=hébergement de fichiers *.cgi <b>compilés</b> permis, etc = d'autres hébergeurs<br>
		</label>
		<aside></aside>
		<footer></footer>
	</body>
</html>